extends layout

block content

  style.
    section.bbs_detail {
      width: 80%;
      margin: 10px auto;
    }

    section.bbs_detail span {
      display: inline-block;
      padding: 1rem;
      margin: 5px;
    }

    section.bbs_detail span.title {
      width: 30%;
      background-color: #ddd;
      text-align: right;
    }

    section.bbs_detail span.data {
      width: 60%;
      background-color: #eee;
    }

    section.replys {
      width: 80%;
      margin: 5px auto;
    }
    section.replys input {
      width: 90%;
    }

    article.replys {
      width: 70%;
      margin: 0 auto;
      display: flex;
    }

    article.replys div {
      padding: 5px;
      margin: 5px;
      background-color: #ccc;
    }

    article.replys div:nth-of-type(1) {
      flex: 1;
    }
    article.replys div:nth-of-type(2) {
      flex: 3;
    }

  section.bbs_detail
    div
      span.title 작성자
      span.data= BBS.b_write
    div
      span.title 작성일자
      span.data= BBS.b_date
    div
      span.title 작성시간
      span.data= BBS.b_time
    div
      span.title 제목
      span.data #{BBS.b_subject}
    div
      span.title 내용
      span.data !{BBS.b_text}
    .btn_box
      button.btn_home 홈으로
      button.btn_update 수정
      button.btn_delete 삭제

  section.replys
    each vo,index in BBS.tbl_replys
      article.replys
          div= vo.r_writer
          div= vo.r_content
          div.replys_delete(data-rid= vo.id) X

    form(method="POST",action="/bbs/replys",class="bbs_writer")
      input(type="hidden",name="r_postId",value= BBS.b_id)
      div
        input#r_writer(name="r_writer",placeholder="작성자를 입력하세요")
      div
        input(id="r_content",name="r_content",placeholder="댓글을 입력하세요")
      div.btn_box
        button.btn_replys 댓글저장


  script.
    document.querySelector("div.btn_box").addEventListener("click", (e) => {
      const btn = e.target;
      const className = btn.className;
      let url = "/";
      if (className.includes("btn_update")) {
        url += `bbs/update?b_id=#{BBS.b_id}`;
      } else if (className.includes("btn_delete")) {
          if(!confirm("본문을 삭제합니다")){
            return false;
          }
          url += `bbs/delete?b_id=#{BBS.b_id}`;
        }
      document.location.href = url;
    });
    document.querySelector("section.replys").addEventListener("click", (e) => {
      const click_tag = e.target;
      if (
        click_tag.tagName === "DIV" &&
        click_tag.className.includes("replys_delete")
      ) {
          let rid = click_tag.dataset.rid;
          if (confirm("댓글을 삭제합니다")) {
            document.location.href = "/bbs/replys/delete/" + rid;
          }
        }
    });
